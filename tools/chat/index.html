<!DOCTYPE html>
<html>
<head>
    <title>Chat System</title>
    <style>
        #chatbox {
            height: 300px;
            overflow-y: scroll;
            border: 1px solid #ccc;
            padding: 10px;
        }
    </style>
</head>
<body>
    <h1>Chat System</h1>
    
    <div id="chatbox"></div>
    
    <div class="message-tools">
        <input type="text" id="username" placeholder="Enter your username">
        <input type="text" id="message" placeholder="Enter your message">
        <button onclick="sendMessage()">Send</button>
    </div>
    <div class="server">
        <input type="text" id="cracked-server" placeholder="Custom Server IP (Leave Blank For Default Servers)">
        <input type="text" id="server" placeholder="Enter server ID">
        <input type="password" id="server-password" placeholder="Server Password">
    </div>
    
    <script>
        var chatbox = document.getElementById("chatbox");
        var usernameInput = document.getElementById("username");
        var messageInput = document.getElementById("message");
        var serverIp = document.getElementById("cracked-server");
        var serverId = document.getElementById("server");
        var serverPassword = document.getElementById("server-password");

        function sendMessage() {
            const defaultIp = "192.168.1.1";
            const defaultPort = "16400";


            var username = usernameInput.value;
            var message = messageInput.value;
            var serverIp = messageInput.value;

            if (username === "" || message === "") {
                return;
            }

            if(serverIp === ""){
                serverIp = defaultIp;
            }

            if(serverId === ""){
                serverId = defaultId;
            }

            //const socket = new WebSocket("ws://${serverIp}")

            var chatEntry = document.createElement("p");
            chatEntry.innerHTML = "<strong>" + username + ":</strong> " + message;
            chatbox.appendChild(chatEntry);
            messageInput.value = "";
            messageInput.focus();

            fetch('https://api.ipify.org?format=json')
            .then(response => response.json())
            .then(data => {
                const ipAddress = data.ip;
                console.log('IP address:', ipAddress);
                // Proceed with sending the packet or performing other actions
            })
            .catch(error => {
                console.error('Error:', error);
            });

            console.log(`${ipAdress}|${username}|${serverIp}|${serverId}|${message}`);
            //socket.send("${ipAdress}|${username}|${serverIp}|${serverId}|${message}");

        }
    </script>
</body>
</html>
